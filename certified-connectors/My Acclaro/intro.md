The Acclaro Web Service API is an extensible set of RESTful interfaces that allow customers and partners to automatically manage translation activities with Acclaro, such as file transfers, order creation, quality ratings and status reporting. With the API in use, source content that resides in commercial or custom developed content management systems can be programmatically sent for translation, then subsequently received and published. Any questions or feedback regarding the Acclaro API can be directed to support@acclaro.com.

## Prerequisites

You need to be provided with a username and password for [My Acclaro](https://my.acclaro.com). To request the credentials, please contact support@acclaro.com or go [here](https://info.acclaro.com/my-acclaro-registration).

Once you have been set up, log into the Portal and get your API key (a bearer token).

## How to get credentials

### Generate Tokens

The Acclaro API uses JSON (javascript object notation) Web Tokens for authentication. To generate valid API tokens, Acclaro customers can follow the steps below:

Directly contact your Acclaro sales or business development representative with your request for an API token OR send an email request to portal@acclaro.com 

Once your request is approved, you will be provided login credentials to the ‘My Acclaro’ customer portal, where you can access the ‘Generate Web Token’ feature from your account Settings page. If you wish to develop and test your API integration with the My Acclaro (Sandbox) API, your sandbox web token can be used with the sandbox endpoint URL, but is not interchangeable with production endpoints. 

After generating a web token, you will be presented a string of approximately 100 characters, which can be highlighted and copied to a local clipboard.

### Presenting Tokens with Requests

Each API request must present a valid token. This is placed in the “Authorization” HTTP header with the “Bearer” schema.


### Token Revocation

If concern ever arises that a token has been compromised, either through digital theft or through accidental public exposure, tokens may be revoked and uniquely re-generated in the Settings page of the ‘My Acclaro’ customer portal.

### Token Implementation Details

The token is an RFC 7519 compliant JSON Web Token containing:

#### Header

* alg: HS256
* typ: JWT

#### Payload

* sub: acclaro-username
* iat: timestamp

Signature - HMACSHA256 signature of first two sections

The issue timestamp is used in the revocation list and ensures that every token is unique. The only encryption method supported is HS256. Any attempts to use other encryption methods, such as NONE, will fail.
## Get started with your connector

### Service URL Endpoints

The Acclaro API is a RESTful interface, residing at:

* Production: https://my.acclaro.com/api/v2
* Sandbox: https://apisandbox.acclaro.com/api/v2

Arguments to API functions are passed as standard web parameters, which may be URL-encoded if the function is accessed with a GET, for example: https://api.acclaro.com/api/v2/orders?status=new

Arguments may also be encoded into a POST body when using multipart/form-data, usually when a file to be translated is being sent.

Return values are JSON encoded in the HTTP response. Every returned record will contain a field success which will be set to `true` if the call is successful, or `false` if it fails.  On failure, there will be two additional fields in the record: errorCode is an integer with values as shown later in this document and errorMessage is a text string explaining the failure. On success, many calls have a field data which points to returned data.

Note that the two calls `/orders/{orderid}/quote-document` and `/orders/{orderid}/files/{fileid}` return the file data in the response rather than JSON data. You can differentiate between an error response of JSON data or a successful response of file data by checking the mime type or if the data starts with `"success":`.

### Interactive Test Console

In the My Acclaro portal there is an interactive test console which can be accessed [here](https://apisandbox.acclaro.com/api/console-restful-api).

This console enables developers to try out the API functionality and see the output of its calls. It is useful for quick tests of API sample workflows that include creating orders, attaching files and submitting for translation.

### Order and File Status Summaries 

Orders can have the following statuses: 

* new – order is being created by API user
* getting quote – quote is being generated by Acclaro
* needs approval – quote is available for client review
* in preparation – order has been submitted to Acclaro and work has been started
* in progress – order has been received by Acclaro
* in review – initial translations have been delivered by Acclaro and are awaiting client feedback before final translations are delivered or client feedback has been provided and Acclaro is preparing final translations for delivery
* complete – all final translated files in an order are ready for API user pickup
* canceled – order and all its files have been canceled by Acclaro on request of API user

Source Files can have the following statuses:

* new – file has been attached to an order that has not yet been submitted
* getting quote – quote is being generated by Acclaro
* in progress – file has been received by Acclaro as part of an order
* preview – an in-progress version of the translated file is ready for API user pickup; editors and proofreaders can review and shared feedback for additional file translation improvements
* complete – translated file is ready for API user pickup
* canceled – file has been canceled by Acclaro on request of API user

Target Files can have the following status:

* complete – translated file is ready for API user pickup

### Callbacks 

An API user may request to receive callbacks when their data changes. Use the call POST /orders/{orderid}/files/{fileid}/callback to be notified when a file changes, or POST /orders/{orderid}/callback to be notified when an order changes. Changes that may trigger a callback include editing an order's attributes, submitting an order, adding a comment to an order, a status change to an order, a finished version of a file appearing, adding a comment to a file, or a file's status changing.

Each of these API calls includes a URL as an argument. Acclaro will perform an HTTP GET operation on the supplied URL when the specified object changes. If your application needs to be passed a particular ID number to properly interpret this callback, please include it in your URL, i.e. https://www.company.com/admin/plugins/acclaro/filecallback.php?oid=12345.

Acclaro batches the dispatch of callbacks, so there may be a delay of several minutes between the object changing and customer notification. For security reasons, we suggest that on receiving a callback, your application should check its database to see that a valid object has been referenced, and then retrieve the current state of that object from Acclaro with GET /orders/{orderid}/files-info or GET order/{orderid}. In this way, invalid or extra callbacks will not cause problems.

Your script which receives the callback should return a successful HTTP response code in the 200 series. If any other response code is returned, we will assume that you failed to process the callback, and repeat it again a few minutes later. If you continue to return unsuccessful responses, we will retry several times before giving up. If you no longer wish to receive callbacks, you may use DELETE /orders/{orderid}/files/{fileid}/callback or DELETE /orders/{orderid}/callback. 

The Callback functionality of the Acclaro API enables integration partners to build end to end automated translation workflows that identify and fetch completed translations as soon as they are available. With the power of callbacks, there are also some risks and coding best practices that should be followed to ensure optimal efficiencies for both the sending and receiving systems. For example, any attempts to change orders or files in response to callbacks indicating changes have occurred could create runaway loops. If you have any questions about callbacks or would like any peer review assistance for your integration code, please send your questions and relevant code snippets to portal@acclaro.com or contact your Acclaro customer representative.

### Email Notifications

Similar to callbacks, the API also supports email notifications in a similar fashion with the following calls: POST /orders/{orderid}/files/{fileid}/email, POST /orders/{orderid}/callback, DELETE /orders/{orderid}/files/{fileid}/email and DELETE /orders/{orderid}/email. The same actions that would trigger a web callback will also trigger these emails to be sent. 

The email notification messages are intended to be read by a person rather than a program, but do follow a consistent formatting style and contain links to the My Acclaro web portal.  These emails are targeted at developers, but can be shared with non-developer colleagues if they would be interested in receiving notifications when relevant order and file statuses change. For more customer-friendly emails, see the delivery options in the My Acclaro portal or use a web callback to invoke a script to send your friendly email.

### Due Dates

The due date in the Acclaro API is specified in ISO8601 format. For example, using "2016-09-22" will choose the current time of day on September 22. Using "2016-09-22T11:22" will choose 11:22am on that date, in the default time zone for the portal user account whose web token is being used for authentication. To specify with full time zone consideration, a format such as "2016-09-22T11:22:00-06:00" could be used, which would indicate 6 hours before GMT (United States Central Time).

### Data Synchronization

The Acclaro translation management platform synchronizes its data with the Acclaro API on a frequent basis throughout each day. When leveraging the API’s functions in your application, it may be useful to consider time buffers for ensuring the data reporting accuracy. For example, it may take 15 minutes or more before the status of a newly submitted order displays ‘in progress’. If after an hour the API is reporting status that does not meet expectations, please contact portal@acclaro.com to report the issue.

### Error Codes

When an API function does not complete normally, the returned record will have success = 0, and errorCode will be set to one of the values below. In addition, errorMessage will have a text string which might be more specific about the problem encountered.

* Missing Authorization - we did not find a web token in the request.
* Bad Authorization -  a web token was provided, but did not pass cryptographic checks or refers to an account without proper permissions.
* Incorrect Arguments - you failed to supply a required argument to the API call, or passed additional unexpected arguments.
* Database Failure - a database failure occurred while processing the API call. Although the system has probably already alerted Acclaro’s system administrators, if you are seeing this error repeatedly, please let us know.
* Permission Denied - you have attempted to perform an action on an object which you do not have access to.
* File Exists -  you have attempted to send a file with a name that conflicts with another file in the order.
* Plunet Communication Failure - the API layer failed to communicate with Acclaro’s internal management system. Although the system has probably already alerted Acclaro’s system administrators, if you are seeing this error repeatedly, please let us know.
* No Such Order -  you have attempted to perform a call on an order that does not exist.
* Cannot Delete - you have attempted to delete an order or file after work has started. Contact your Acclaro project manager to request a cancellation of work in progress.
* Cannot Update -  you have attempted to change an order or file after work has started.  Contact your Acclaro project manager to request a cancellation of work in progress.
* Bad Language -  you have specified a source or target language that is not supported by Acclaro.
* No Such File -  you have attempted to perform a call on a file that does not exist. 
* Bad Date - we could not parse the provided date/time.
* No Such Callback - we couldn't find the specified callback. 
* Bad Delivery - an unsupported delivery value was given 
* No Simulation - the simulation API calls are not enabled
* Too Large - the submitted file is too large to be processed.

## Known issues and limitations

* The maximum amount of results per page is 50, it is recommended to paginate those queries that are expected to return more than 50 results.
* The maximum amount of requests per minute allowed for each IP is 180; please contact support if this causes a limitation for you.

## Common errors and remedies

#### Creating an Order and not submititng it:

When an Order is created, the Order remains open in case the user wants to add more items or needs more time to complete the Order. Once the Order is complete, the user has to "submit" the Order for translation.

It is common to miss this step when the API is ran manually through commands or manual steps.

By default, Acclaro will not take action on any Order that has not been submitted. In case you cannot submit the Order through the API or the UI for any reason, please contact your assigned Program Manager, or the support team at: support@acclaro.com

#### Date format

The API works with ISO8601 date format, e.g. “2022-01-21T16:24:00-05:00”, but dates, are output as strings in the JSON response. To convert the format from string to date, you may use this formula `formatDateTime({anyMyAcclaroDateField},'g')`. Fields that contain dates are `created`, `modified`, `due_date`, `requested_due_date`. 

If you want to set a due date from any other tool, e.g. MS Forms, you will need to format it into ISO8601 using the same formula shown above.

## FAQ

1. Does Acclaro provide a staging environment to test the API?

*Acclaro provides a sandbox API environment which you can make API requests to. To access this environment you can change the endpoint to 'apisandbox.acclaro.com' and obtain a Bearer token for this environment accordingly. If you would like to change back to the production endpoint you will need to change to 'my.acclaro.com'.*

2. Does Acclaro charge any fees for using the My Acclaro Portal?

*No, Acclaro charges for the services requested through the portal My Acclaro, but the use of the portal and its API is free for all Acclaro customers.*